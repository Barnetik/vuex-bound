{"version":3,"file":"vuex-bound.cjs.js","sources":["../src/index.js"],"sourcesContent":["export const normalizeMap = (map) => {\n  return Array.isArray(map)\n    ? map.map(key => ({ key, val: key }))\n    : Object.keys(map).map(key => ({ key, val: map[key] }))\n};\n\nexport const normalizeNamespace = (func) => {\n  return (namespace, map) => {\n    if (typeof namespace !== 'string') {\n      map = namespace;\n      namespace = '';\n    }\n\n    return func(namespace, map);\n  };\n};\n\nexport const mapModelsToState = normalizeNamespace((namespace, models) => {\n  const res = {};\n\n  normalizeMap(models).forEach(({ key, val }) => {\n    res[key] = {\n      get() {\n        if (!namespace) {  // for global\n          if (typeof val === 'function') {  // handle objects\n            val(this.$store.state);  // TODO: nested state\n          } else {  // handle arrays\n            return this.$store.state[key];\n          }\n        } else {  // for modules\n          if (typeof val === 'function') {  // handle objects\n            val(this.$store.state);  // TODO: nested state\n          } else {  // handle arrays\n            return namespace.split('/')\n              .reduce((prev, cur) => prev[cur], this.$store.state)[key];\n          }\n        }\n      },\n      set(value) {\n        if (!namespace) {  // for global\n          this.$store.commit('updateModel', { label: key, value });\n        } else {  // for modules\n          this.$store.commit(`${namespace.split('/').join('/')}/updateModel`, { label: key, value });\n        }\n      },\n    };\n  });\n\n  return res;\n});\n\nexport const mapModel = mapModelsToState;\n\nexport const updateModel = () => ({\n  updateModel(state, { label, value }) {\n    state[label] = value;\n  },\n});\n"],"names":["normalizeMap","map","Array","isArray","key","val","Object","keys","normalizeNamespace","func","namespace","mapModelsToState","models","res","forEach","$store","state","split","reduce","prev","cur","value","commit","label","join","mapModel","updateModel"],"mappings":";;;;IAAaA,eAAe,SAAfA,YAAe,CAACC,GAAD,EAAS;SAC5BC,MAAMC,OAAN,CAAcF,GAAd,IACHA,IAAIA,GAAJ,CAAQ;WAAQ,EAAEG,QAAF,EAAOC,KAAKD,GAAZ,EAAR;GAAR,CADG,GAEHE,OAAOC,IAAP,CAAYN,GAAZ,EAAiBA,GAAjB,CAAqB;WAAQ,EAAEG,QAAF,EAAOC,KAAKJ,IAAIG,GAAJ,CAAZ,EAAR;GAArB,CAFJ;CADK;;AAMP,IAAaI,qBAAqB,SAArBA,kBAAqB,CAACC,IAAD,EAAU;SACnC,UAACC,SAAD,EAAYT,GAAZ,EAAoB;QACrB,OAAOS,SAAP,KAAqB,QAAzB,EAAmC;YAC3BA,SAAN;kBACY,EAAZ;;;WAGKD,KAAKC,SAAL,EAAgBT,GAAhB,CAAP;GANF;CADK;;AAWP,IAAaU,mBAAmBH,mBAAmB,UAACE,SAAD,EAAYE,MAAZ,EAAuB;MAClEC,MAAM,EAAZ;;eAEaD,MAAb,EAAqBE,OAArB,CAA6B,gBAAkB;QAAfV,GAAe,QAAfA,GAAe;QAAVC,GAAU,QAAVA,GAAU;;QACzCD,GAAJ,IAAW;SAAA,iBACH;YACA,CAACM,SAAL,EAAgB;;cACV,OAAOL,GAAP,KAAe,UAAnB,EAA+B;;gBACzB,KAAKU,MAAL,CAAYC,KAAhB,EAD6B;WAA/B,MAEO;;mBACE,KAAKD,MAAL,CAAYC,KAAZ,CAAkBZ,GAAlB,CAAP;;SAJJ,MAMO;;cACD,OAAOC,GAAP,KAAe,UAAnB,EAA+B;;gBACzB,KAAKU,MAAL,CAAYC,KAAhB,EAD6B;WAA/B,MAEO;;mBACEN,UAAUO,KAAV,CAAgB,GAAhB,EACJC,MADI,CACG,UAACC,IAAD,EAAOC,GAAP;qBAAeD,KAAKC,GAAL,CAAf;aADH,EAC6B,KAAKL,MAAL,CAAYC,KADzC,EACgDZ,GADhD,CAAP;;;OAZG;SAAA,eAiBLiB,KAjBK,EAiBE;YACL,CAACX,SAAL,EAAgB;;eACTK,MAAL,CAAYO,MAAZ,CAAmB,aAAnB,EAAkC,EAAEC,OAAOnB,GAAT,EAAciB,YAAd,EAAlC;SADF,MAEO;;eACAN,MAAL,CAAYO,MAAZ,CAAsBZ,UAAUO,KAAV,CAAgB,GAAhB,EAAqBO,IAArB,CAA0B,GAA1B,CAAtB,mBAAoE,EAAED,OAAOnB,GAAT,EAAciB,YAAd,EAApE;;;KArBN;GADF;;SA4BOR,GAAP;CA/B8B,CAAzB;;AAkCP,IAAaY,WAAWd,gBAAjB;;AAEP,IAAae,cAAc,SAAdA,WAAc;SAAO;eAAA,uBACpBV,KADoB,SACK;UAAhBO,KAAgB,SAAhBA,KAAgB;UAATF,KAAS,SAATA,KAAS;;YAC7BE,KAAN,IAAeF,KAAf;;GAFuB;CAApB;;;;;;;;"}