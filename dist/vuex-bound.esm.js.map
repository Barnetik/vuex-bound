{"version":3,"file":"vuex-bound.esm.js","sources":["../src/index.js"],"sourcesContent":["export const normalizeMap = map => (\n  Array.isArray(map)\n    ? map.map(key => ({ key, val: key }))\n    : Object.keys(map).map(key => ({ key, val: map[key] }))\n);\n\nexport const normalizeNamespace = func =>\n  (namespace, map) => {\n    if (typeof namespace !== 'string') {\n      map = namespace;\n      namespace = '';\n    }\n\n    return func(namespace, map);\n  };\n\nexport const mapModel = normalizeNamespace((namespace, models) => {\n  const res = {};\n\n  normalizeMap(models).forEach(({ key, val }) => {\n    res[key] = {\n      get() {\n        if (!namespace) {\n          const globalState = this.$store.state;\n\n          if (typeof val === 'function') return val(globalState);\n          return globalState[key];\n        }\n\n        const moduleState = namespace.split('/')\n          .reduce((prev, cur) => prev[cur], this.$store.state);\n\n        if (typeof val === 'function') return val(moduleState);\n        return moduleState[key];\n      },\n      set(value) {\n        const type = !namespace ? 'updateModel' : `${namespace.split('/').join('/')}/updateModel`;\n\n        const valify = String(val);\n        const originState = valify.substring(valify.indexOf('.') + 1, valify.indexOf(';'));\n\n        this.$store.commit(type, { label: originState || key, value });\n      },\n    };\n  });\n\n  return res;\n});\n\nexport const updateModel = () => ({\n  updateModel(state, { label, value }) {\n    state[label] = value;\n  },\n});\n"],"names":["normalizeMap","Array","isArray","map","key","val","Object","keys","normalizeNamespace","namespace","func","mapModel","models","res","forEach","globalState","$store","state","moduleState","split","reduce","prev","cur","value","type","join","valify","String","originState","substring","indexOf","commit","label","updateModel"],"mappings":"IAAaA,eAAe,SAAfA,YAAe;SAC1BC,MAAMC,OAAN,CAAcC,GAAd,IACIA,IAAIA,GAAJ,CAAQ;WAAQ,EAAEC,QAAF,EAAOC,KAAKD,GAAZ,EAAR;GAAR,CADJ,GAEIE,OAAOC,IAAP,CAAYJ,GAAZ,EAAiBA,GAAjB,CAAqB;WAAQ,EAAEC,QAAF,EAAOC,KAAKF,IAAIC,GAAJ,CAAZ,EAAR;GAArB,CAHsB;CAArB;;AAMP,IAAaI,qBAAqB,SAArBA,kBAAqB;SAChC,UAACC,SAAD,EAAYN,GAAZ,EAAoB;QACd,OAAOM,SAAP,KAAqB,QAAzB,EAAmC;YAC3BA,SAAN;kBACY,EAAZ;;;WAGKC,KAAKD,SAAL,EAAgBN,GAAhB,CAAP;GAP8B;CAA3B;;AAUP,IAAaQ,WAAWH,mBAAmB,UAACC,SAAD,EAAYG,MAAZ,EAAuB;MAC1DC,MAAM,EAAZ;;eAEaD,MAAb,EAAqBE,OAArB,CAA6B,gBAAkB;QAAfV,GAAe,QAAfA,GAAe;QAAVC,GAAU,QAAVA,GAAU;;QACzCD,GAAJ,IAAW;SAAA,iBACH;YACA,CAACK,SAAL,EAAgB;cACRM,cAAc,KAAKC,MAAL,CAAYC,KAAhC;;cAEI,OAAOZ,GAAP,KAAe,UAAnB,EAA+B,OAAOA,IAAIU,WAAJ,CAAP;iBACxBA,YAAYX,GAAZ,CAAP;;;YAGIc,cAAcT,UAAUU,KAAV,CAAgB,GAAhB,EACjBC,MADiB,CACV,UAACC,IAAD,EAAOC,GAAP;iBAAeD,KAAKC,GAAL,CAAf;SADU,EACgB,KAAKN,MAAL,CAAYC,KAD5B,CAApB;;YAGI,OAAOZ,GAAP,KAAe,UAAnB,EAA+B,OAAOA,IAAIa,WAAJ,CAAP;eACxBA,YAAYd,GAAZ,CAAP;OAbO;SAAA,eAeLmB,KAfK,EAeE;YACHC,OAAO,CAACf,SAAD,GAAa,aAAb,GAAgCA,UAAUU,KAAV,CAAgB,GAAhB,EAAqBM,IAArB,CAA0B,GAA1B,CAAhC,iBAAb;;YAEMC,SAASC,OAAOtB,GAAP,CAAf;YACMuB,cAAcF,OAAOG,SAAP,CAAiBH,OAAOI,OAAP,CAAe,GAAf,IAAsB,CAAvC,EAA0CJ,OAAOI,OAAP,CAAe,GAAf,CAA1C,CAApB;;aAEKd,MAAL,CAAYe,MAAZ,CAAmBP,IAAnB,EAAyB,EAAEQ,OAAOJ,eAAexB,GAAxB,EAA6BmB,YAA7B,EAAzB;;KArBJ;GADF;;SA2BOV,GAAP;CA9BsB,CAAjB;;AAiCP,IAAaoB,cAAc,SAAdA,WAAc;SAAO;eAAA,uBACpBhB,KADoB,SACK;UAAhBe,KAAgB,SAAhBA,KAAgB;UAATT,KAAS,SAATA,KAAS;;YAC7BS,KAAN,IAAeT,KAAf;;GAFuB;CAApB;;;;"}